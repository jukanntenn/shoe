import*as Popper from"@popperjs/core";const NAME$3="backdrop";class Backdrop{constructor(t){this.elem=null,this.isAppended=!1,this.config=t}static get NAME(){return NAME$3}show(){this.append()}hide(){this.dispose()}dispose(){this.isAppended&&(this.elem.removeEventListener("click",this.handleClick,!0),this.elem.remove(),this.isAppended=!1)}append(){if(this.isAppended)return;const t=this.getElement();document.body.append(t),t.addEventListener("click",this.handleClick.bind(this),!0),this.isAppended=!0}getElement(){if(!this.elem){const t=document.createElement("div");this.config.className&&(t.className=this.config.className),this.elem=t}return this.elem}handleClick(){this.config.clickCallback&&this.config.clickCallback()}}const NAME$2="offcanvas",defaultConfig={backdrop:!0};class Offcanvas{constructor(t,e){this.isShown=!1,this.elem=t,this.config=Object.assign(e||{},defaultConfig),this.oriTransformVal=this.elem.style.transform,this.backdrop=this.initializeBackDrop()}static get NAME(){return NAME$2}toggle(){return this.isShown?this.hide():this.show()}show(){var t;this.elem.style.transform="none",this.isShown=!0,null===(t=this.backdrop)||void 0===t||t.show()}hide(){var t;this.isShown&&(this.elem.style.transform=this.oriTransformVal,this.isShown=!1,null===(t=this.backdrop)||void 0===t||t.hide())}initializeBackDrop(){if(this.config.backdrop)return new Backdrop({className:this.config.backdropClassName,clickCallback:()=>{this.hide()}})}}const NAME$1="dropdown",DefaultConfig={placement:"bottom"};class Dropdown{constructor(t,e,s){this.isShown=!1,this.popper=null,this.targetElem=e,this.triggerElem=t,this.config=Object.assign(Object.assign({},DefaultConfig),s||{}),this.triggerElem.addEventListener("click",(()=>{this.toggle()}))}static get NAME(){return NAME$1}handleClickOutside(t){const e=t.target;e===this.targetElem||this.targetElem.contains(e)||this.triggerElem.contains(e)||!this.isShown||this.hide(),document.body.removeEventListener("click",this.handleClickOutside,!0)}toggle(){this.isShown?(this.hide(),document.body.removeEventListener("click",this.handleClickOutside,!0)):this.show()}show(){this.targetElem.style.display="block",document.body.addEventListener("click",(t=>{this.handleClickOutside(t)}),!0),this.popper=Popper.createPopper(this.triggerElem,this.targetElem,{placement:this.config.placement,modifiers:[{name:"offset",options:{offset:[0,10]}}]}),this.popper.update(),this.isShown=!0}hide(){this.targetElem.style.display="none",this.popper&&this.popper.destroy(),this.isShown=!1}}const NAME="scrollspy";class Scrollspy{constructor(t,e=document.body,s={}){this.targets=[],this.activeTarget=null,this.config={},this.scrollElement="BODY"===e.tagName?window:e,this.scrollElement.addEventListener("scroll",(()=>{this.process()})),Object.assign(this.config,s),this.refresh(t),this.process()}static get NAME(){return NAME}refresh(t){const e=this.scrollElement===window?0:this.getScrollTop(),s=[];let i;const l=t=>{const i=Scrollspy.getSelector(t),l=i?Scrollspy.find(i,this.scrollElement===window?document.body:this.scrollElement):null;if(!l)return null;const o=l.getBoundingClientRect();return o.width||o.height?{parent:s[s.length-1],element:t,offset:this.scrollElement===window?o.top+window.pageYOffset+e:l.offsetTop+e}:null},o=e=>{if(0===e.length||Array.isArray(t[0]))throw new Error("Invalid tree structure");const r=l(e[0]);null!==r&&this.targets.push(r),i=r;for(let t=1;t<e.length;t+=1){const r=e[t];if(Array.isArray(r))s.push(i),o(r);else{const t=l(r);null!==t&&this.targets.push(t),i=t}}s.pop()};o(t),this.targets=this.targets.sort(((t,e)=>t.offset-e.offset))}getScrollTop(){return this.scrollElement===window?this.scrollElement.pageYOffset:this.scrollElement.scrollTop}getScrollHeight(){return this.scrollElement.scrollHeight||Math.max(document.body.scrollHeight,document.documentElement.scrollHeight)}getOffsetHeight(){return this.scrollElement===window?window.innerHeight:this.scrollElement.getBoundingClientRect().height}process(){const t=this.getScrollTop();if(t>=this.getScrollHeight()-this.getOffsetHeight()){const t=this.targets[this.targets.length-1];this.activeTarget!==t&&this.activate(t)}else{if(this.activeTarget&&t<this.targets[0].offset&&this.targets[0].offset>0)return this.activeTarget=null,void this.clear();for(let e=0;e<this.targets.length;e+=1)this.activeTarget!==this.targets[e]&&t>=this.targets[e].offset&&(void 0===this.targets[e+1]||t<this.targets[e+1].offset)&&this.activate(this.targets[e])}}activate(t){if(this.activeTarget=t,this.clear(),this.config.activeClassName){const e=this.config.activeClassName.split(" ");this.activeTarget.element.classList.add(...e);let{parent:s}=t;for(;s;)s.element.classList.add(...e),s=s.parent}}clear(){if(this.config.activeClassName){const t=this.config.activeClassName.split(" ");this.targets.forEach((e=>e.element.classList.remove(...t)))}}static getSelector(t){let e=null,s=t.getAttribute("href");return s&&(s.includes("#")||s.startsWith("."))?(s.includes("#")&&!s.startsWith("#")&&(s=`#${s.split("#")[1]}`),e=s&&"#"!==s?s.trim():null,e):null}static find(t,e=document.body){return Element.prototype.querySelector.call(e,t)}}export{Dropdown,Offcanvas,Scrollspy};
//# sourceMappingURL=shoe.esm.min.js.map